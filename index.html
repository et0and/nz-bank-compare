<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Zealand Bank Savings Rates</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta description="Compare savings rates across New Zealand banks and financial institutions">
    <meta property="og:image" content="og.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
    <style>
        .fixed-controls {
          position: sticky;
          top: 0;
          background-color: white;
          padding: 1rem 0;
          z-index: 1000;
          display: flex;
          justify-content: space-between;
        }
      
        .container {
          margin-top: 2rem; 
          margin-bottom: 2rem;
        }
      </style>             
</head>
<body>
    <div class="container">
        <h1 class="mt-3">üè¶ New Zealand Bank Savings Rates</h1>
        <h6><a href="https://docs.google.com/spreadsheets/d/1tElk1eIG5SnQcpqEwNYnyBpTbV9-zWUar5_XDnqeSs4/">Source</a></h6>
        <div class="fixed-controls">
          <div id="search-bar"></div>
          <div id="show-entries"></div>
        </div>
        <div class="table-responsive">
            <table id="bank-data" class="table table-striped table-bordered mt-3" style="width:100%">
                <thead>
                    <tr>
                        <th>Institution Name</th>
                        <th>Institution Type</th>
                        <th>Account Name</th>
                        <th>Description</th>
                        <th>Account Category</th>
                        <th>URL</th>
                        <th>Credit Rating</th>
                        <th>Total Interest Rate</th>
                        <th>Interest Conditions</th>
                        <th>Interest Payment Frequency</th>
                        <th>Minimum Balance Requirement</th>
                        <th>Maximum Balance Requirement</th>
                        <th>Account Fees</th>
                        <th>Service Fees URL</th>
                        <th>Withdrawal Restrictions</th>
                        <th>Overdraft Available</th>
                        <th>Eligibility Criteria</th>
                        <th>Online/Mobile Banking</th>
                        <th>Branch Access</th>

                </tr>
            </thead>
            <tbody>
                <!-- DataTables will populate this with data -->
            </tbody>
        </table>
    </div>
    <script>
        $(document).ready(function() {
          // Fetch the CSV data
          $.get('https://docs.google.com/spreadsheets/d/e/2PACX-1vQfi5S9fDA-DRiESDOZJxVIUKl9VhSwRYlaxLK6xcEIF1PU8tt7c5yFTs4LY8NFgZXjdgW6KJsjmaNJ/pub?output=csv', function(csvString) {
              
              // Convert CSV to array
              const data = $.csv.toArrays(csvString);
        
              // Remove the header row
              const header = data.shift();
        
              // Initialize DataTables
              const table = $('#bank-data').DataTable({
                  data: data,
                  columns: header.map(title => ({ title })),
                  searching: true,
                  paging: true,
                  pageLength: 25,
                  responsive: true,
                  initComplete: function() {
                    // Move the search bar and "Show entries" dropdown
                    $("#search-bar").append($(".dataTables_filter"));
                    $("#show-entries").append($(".dataTables_length"));
                  }
              });
          });
        });
        </script>        
    </body>
</html>
